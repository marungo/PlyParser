 <html>
  <head>
    <title>Ply Parser Project</title>
    <style>
      body { margin: 0px; width: 100%; }
      canvas {
          display: block;
          margin: 25px auto;
          width: 90%;
          height: 100%
      }
    </style>
    <script src="Libraries/three.min.js"></script>
    <script src ="Libraries/OrbitControls.js"></script>
    <script src ="mesh.js"></script>

  </head>
  <body>

<script>

  var scene = new THREE.Scene();

  //camera with orbit controlling
  var camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 0.1, 1000 );
  camera.position.set(0, 0, 20);
  controls = new THREE.OrbitControls( camera );
  controls.damping = 0.2;
  controls.addEventListener( 'change', render );

  var loader = new THREE.PLYLoader();

  loader.addEventListener( 'load', function ( event  ) {
      
      //geometry built from ply
      var geometry = event.content;
      console.log(geometry.boundingSphere);

      //jpg texture maps onto material
      var material = new THREE.MeshBasicMaterial();
      var texture = new THREE.ImageUtils.loadTexture("prnt.jpg");
      material.map = texture;

      mesh = new THREE.Mesh(geometry, material);

      var bbox = new THREE.BoundingBoxHelper( mesh, 0x36D439 );
      bbox.update();

      var biggest = bbox.box.max;
      var smallest = bbox.box.min;
      var center = new THREE.Vector3( (biggest.x - Math.abs(smallest.x) ) / 2,
                                      (biggest.y - Math.abs(smallest.y) ) / 2,
                                      (biggest.z - Math.abs(smallest.z) ) / 2 );

      //camera is now dynamic - every geometry will be placed in origin.
      mesh.position.set( -center.x, -center.y, -center.z );
      bbox.update();

      geometry.boundingBox = bbox.box;

      //uncomment these to see axis and bounding box
      //var axis = buildAxis();
      //scene.add( bbox );      

      scene.add(mesh);
      console.log(mesh);
  } );

  loader.load( "prnt.ply" );

  //renderer
  var renderer = new THREE.WebGLRenderer();
  renderer.setSize( window.innerWidth, window.innerHeight );
  renderer.setClearColor( 0xD3D3D3, .8);
  document.body.appendChild( renderer.domElement );

  animate();

  function animate() {
    requestAnimationFrame( animate );
    controls.update();
  }

  function render() {
    renderer.render( scene, camera );
  }

  render();


</script>

</body>
</html>